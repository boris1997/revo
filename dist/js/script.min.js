class Slider{constructor(t,e,n,s){this.arrow=t,this.content=e,this.main=n,this.isDragging=!1,this.currentIndex=0,this.startPos=0,this.translateStep=0,this.currentTranslation=0,this.margin=0,this.elemntsMargins=0,this.prevTranslation=0,this.animationID=0,this.stopperFactor=s}resizeWindow=()=>{window.onresize=t=>{this.getTransformation(t)}};contextMenu=()=>{window.oncontextmenu=t=>(t.preventDefault(),t.stopPropagation(),!1)};initDrag=()=>{this.content.map(((t,e)=>{t.addEventListener("dragstart",(t=>t.preventDefault())),t.addEventListener("touchstart",this.touchStart(e),{passive:!0}),t.addEventListener("touchend",(t=>this.touchEnd(t))),t.addEventListener("touchmove",this.touchMove,{passive:!0}),t.addEventListener("mousedown",this.touchStart(e),{passive:!0}),t.addEventListener("mouseup",(t=>this.touchEnd(t))),t.addEventListener("mousemove",this.touchMove,{passive:!0}),console.log("ok"),t.addEventListener("mouseleave",(t=>this.isDragging&&this.touchEnd(t)))}))};touchStart=t=>t=>{this.main.classList.remove("carousel__content--smooth"),this.startPos=this.getPositionX(t),this.isDragging=!0,this.animationID=requestAnimationFrame(this.animation)};touchEnd=t=>{cancelAnimationFrame(this.animationID),this.isDragging=!1,this.main.classList.add("carousel__content--smooth"),console.log(this.currentIndex),console.log(this.content.length),this.currentIndex<this.content.length&&Math.abs(this.currentTranslation)>Math.abs(this.prevTranslation)+this.translateStep/3&&(this.currentIndex++,console.log("ok")),this.currentIndex>=0&&(console.log(this.content.length-1),Math.abs(this.currentTranslation)<Math.abs(this.prevTranslation)-this.translateStep/3&&this.currentIndex--),this.getTransformation()};touchMove=t=>{if(this.isDragging){let e=this.getPositionX(t);Math.abs(this.currentTranslation)+100<=this.translateStep*this.content.length+this.elemntsMargins&&this.currentTranslation<2&&(console.log(Math.abs(this.currentTranslation)),this.currentTranslation=(this.prevTranslation*this.main.clientWidth/100+e-this.startPos)/this.main.clientWidth*100)}};animation=()=>{this.setSliderPosition(),this.isDragging&&requestAnimationFrame(this.animation)};setSliderPosition=()=>{console.log(this.currentTranslation),this.main.style.transform=`translate(${this.currentTranslation}%)`};getPositionX=t=>t.type.includes("mouse")?t.pageX:t.touches[0].clientX;absToPercent=(t,e)=>t/e*100;getToggleBtns=()=>{this.arrow[0].addEventListener("click",(t=>{this.left(t)})),this.arrow[1].addEventListener("click",(t=>{this.rigth(t)}))};rigth=t=>{2*Math.abs(this.currentTranslation)+100<=this.translateStep*this.content.length+this.elemntsMargins&&(this.currentIndex++,this.getTransformation())};left=t=>{console.log(Math.abs(this.currentTranslation)),Math.abs(this.currentTranslation)>0&&(this.currentIndex--,this.getTransformation(t))};getTransformation=()=>{this.prevTranslation=this.currentIndex*-(this.content[0].clientWidth+this.margin)/this.main.clientWidth*100,this.currentTranslation=this.currentIndex*-this.translateStep,Math.abs(this.currentTranslation)>0?this.arrow[0].classList.contains("carousel__toggle-btn--unactive")&&this.arrow[0].classList.remove("carousel__toggle-btn--unactive"):this.arrow[0].classList.add("carousel__toggle-btn--unactive"),Math.abs(this.currentTranslation)+Math.abs(this.currentTranslation)+100>=this.translateStep*this.content.length+this.elemntsMargins?this.arrow[1].classList.add("carousel__toggle-btn--unactive"):this.arrow[1].classList.remove("carousel__toggle-btn--unactive"),this.setSliderPosition(),this.getUnactiveElts()};isUnactiveElts=()=>this.content.some(((t,e)=>(console.log(t),this.main.clientWidth<t.offsetLeft)));getUnactiveElts=()=>this.content.map((t=>{const e=(Math.abs(this.currentTranslation)*this.main.clientWidth/100).toFixed();this.main.clientWidth<t.offsetLeft+this.margin-e||t.offsetLeft-e<0?(console.log("ok"),t.classList.add("carousel__item--unActive")):(console.log(t),t.classList.contains("carousel__item--unActive")&&t.classList.remove("carousel__item--unActive"))}));getMargin=()=>{this.margin=+getComputedStyle(this.content[0]).marginLeft.split("px").join(""),this.elemntsMargins=this.absToPercent(this.margin*this.content.length,this.getTotalElementsWidth())-this.stopperFactor,console.log(this.margin)};getTranslateStep=()=>{this.translateStep=(this.content[0].clientWidth+this.margin)/this.main.clientWidth*100};getTotalElementsWidth=()=>(this.content[0].clientWidth+this.margin)*this.content.length}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".coffee__toggle-btn")],e=[...document.querySelectorAll(".coffee__item")],n=document.querySelector(".coffee__body-wrapper"),s=new Slider(t,e,n,0);s.getMargin(),s.getUnactiveElts(),s.getTranslateStep(),s.getToggleBtns(),s.initDrag(),s.contextMenu();const i=[...document.querySelectorAll(".combo__toggle-btn")],a=[...document.querySelectorAll(".combo__item")],o=document.querySelector(".combo__body-wrapper"),r=new Slider(i,a,o,4);r.getMargin(),r.getUnactiveElts(),r.getTranslateStep(),r.getToggleBtns(),r.initDrag(),r.contextMenu()}));